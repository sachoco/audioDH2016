(function(){var t,r,e,o,n,i,a;n=null,i=0,o=!1,e=null,r=null,a=function(t){var r,e;return r=function(t){return{h:Math.floor(t/36e5),m:Math.floor(t/6e4%60),s:Math.floor(t/1e3%60)}},r=r(t),e=[],r.h>0&&e.push(r.h),e.push("0"+r.m),e.push(r.s<10?"0"+r.s:r.s),e.join(".")},null==(t=Array.prototype).shuffle&&(t.shuffle=function(){var t,r,e,o,n;if(this.length>1)for(t=e=o=this.length-1;1>=o?1>=e:e>=1;t=1>=o?++e:--e)r=Math.floor(Math.random()*(t+1)),n=[this[r],this[t]],this[t]=n[0],this[r]=n[1];return this}),jQuery(function(t){var s,u,c,l,d,h,f,p,m,k,g,v,b,y;return p=function(){return t("body").hasClass("mobile")?o?d():(soundManager.play("mySound",{onfinish:function(){return i++,i>=tracks.length&&(i=0),soundManager.setPosition("mySound",0),soundManager.load("mySound"),h(tracks[i])}}),t("button.playpause i").addClass("audiodh-pause").removeClass("audiodh-play"),o=!0):o?d():h(tracks[i])},h=function(i){return SC.get("/tracks/"+i.track_id).then(function(s){var u;return e=s.duration,r=s.download_url,t("button.download").addClass("active").removeAttr("disabled"),u=i.artist_full?i.artist_full:i.artist,t(".trackinfo-cur .title").html(i.track_title),t(".trackinfo-cur .artist").html(u),t(".curtrack-description header").html("<h3>"+i.artist_full+"</h3><h4>"+i.track_title+"</h4>"),t(".curtrack-description section").html(i.description),t(".curtrack-description footer").html("<a href='"+i.link+"' target='_blank'>"+i.link+"</a>"),t(".curtrack-description").css("display","table"),t(".controller .dur").html(a(e)),t(".trackinfo").hide(),t("ul.tracks li").removeClass("nowplaying"),t("ul.tracks li[data-id='"+i.id+"']").addClass("nowplaying"),t(".info-area").removeClass("grey"),t("body").hasClass("mobile")?(soundManager.destroySound("mySound"),n=soundManager.createSound({id:"mySound",url:s.stream_url+"?client_id=d71d92737e650fa0a479ca7aaff8b652",stream:!0}),soundManager.play("mySound")):(t(".controller-wrapper").outerHeight()+40>t(".curtrack-description").outerHeight()&&t(".curtrack-description").outerHeight(t(".controller-wrapper").outerHeight()+40),t(".footer").velocity({height:Math.max(t(".curtrack-description").outerHeight(),t(".controller").height()+40)},{duration:500,queue:!1,begin:function(){var t;return t=!0},complete:function(){var t;return t=!1}}),SC.stream("/tracks/"+i.track_id).then(function(r){return"rtmp"===r.options.protocols[0]&&r.options.protocols.splice(0,1),r.play(),n=r,r.on("time",function(){return t(".controller .cur").html(a(r.currentTime())),t("#progress-indicator").width(r.currentTime()/e*100+"%")}),r.on("finish",function(){return f()}),t("button.playpause i").addClass("audiodh-pause").removeClass("audiodh-play"),o=!0}))})},d=function(){return n.pause(),t("button.playpause i").removeClass("audiodh-pause").addClass("audiodh-play"),o=!1},f=function(){return i++,i>=tracks.length&&(i=0),t("body").hasClass("mobile")?n&&soundManager.setPosition("mySound",0):n&&n.seek(0),h(tracks[i])},m=function(){return i--,0>i&&(i=mytracks.length),t("body").hasClass("mobile")?n&&soundManager.setPosition("mySound",0):n&&n.seek(0),h(tracks[i])},t("button.playpause").on("click",function(){return p()}),t("button.next").on("click",function(){return f()}),t("button.prev").on("click",function(){return m()}),t("button.shuffle").on("click",function(){var r;return t(this).toggleClass("active"),r=tracks[i],t(this).hasClass("active")?tracks.shuffle():tracks.sort(function(t,r){return parseFloat(t.id)-parseFloat(r.id)}),n?i=t.inArray(r,tracks):void 0}),t("button.download").on("click",function(){return window.location.href=r+"?client_id=098249c9bda43969033f485dc628827d"}),c=function(r){var o,i,a,s,u;if(o=t("#progress-scrubber"),i=o.offset(),s=o.width(),u=r.clientX-i.left,a=u/s,t("#progress-indicator").width(100*a+"%"),t("body").hasClass("mobile")){if(n)return soundManager.setPosition("mySound",a*e)}else if(n)return n.seek(a*e)},g=function(r){var o,i,a,s,u;if(o=t("#progress-scrubber"),i=o.offset(),s=o.width(),u=r.clientX-i.left,a=u/s,t("#progress-scrubber").on("mousemove",c),t("#progress-indicator").width(100*a+"%"),t("body").hasClass("mobile")){if(n)return soundManager.setPosition("mySound",a*e)}else if(n)return n.seek(a*e)},b=function(r){return t("#progress-scrubber").off("mousemove",c)},t("#progress-scrubber").on("mousedown",g),t(document).on("mouseup",b),l=function(r){var e,o,i,a,s;return e=t("#volume-scrubber"),o=e.offset(),a=e.width(),s=r.clientX-o.left,i=s/a,t("#volume-indicator").width(100*i+"%"),n?n.setVolume(i):void 0},v=function(r){var e,o,i,a,s;return e=t("#volume-scrubber"),o=e.offset(),a=e.width(),s=r.clientX-o.left,i=s/a,t("#volume-scrubber").on("mousemove",l),t("#volume-indicator").width(100*i+"%"),n?n.setVolume(i):void 0},y=function(r){return t("#volume-scrubber").off("mousemove",l)},t("#volume-scrubber").on("mousedown",v),t(document).on("mouseup",y),s=!1,u=!1,t("body").hasClass("mobile")||(t("ul.tracks li").on("mouseenter",function(){var r,e;return t(this).hasClass("nowplaying")?k():s||(r=t(this).data("id"),e=t.grep(tracks,function(t){return t.id===r}),e=e[0],t(".trackinfo header").html("<h3>"+e.artist_full+"</h3><h4>"+e.track_title+"</h4>"),t(".trackinfo section").html(e.description),t(".trackinfo footer").html("<a href='"+e.link+"' target='_blank'>"+e.link+"</a>"),t(".trackinfo").css("display","table"),t(".info-area").addClass("grey"),t(".curtrack-description").hide(),t(".controller-wrapper").outerHeight()+40>t(".trackinfo").outerHeight()&&t(".trackinfo").outerHeight(t(".controller-wrapper").outerHeight()+40),t(".footer").velocity({height:Math.max(t(".trackinfo").outerHeight(),t(".controller-wrapper").outerHeight()+40)},{duration:500,queue:!1})),this}),t(".header").hover(function(){return k()}),t(".footer").on("mouseenter",function(){return k()})),t("ul.tracks li").click(function(){var r,e,o;return r=t(this).data("id"),o=t.grep(tracks,function(t,e){return t.id===r}),o=o[0],e=t.inArray(o,tracks),i=e,t(".tracks li").removeClass("nowplaying"),t(this).addClass("nowplaying"),h(o)}),t("nav.nav li:not('.home-btn, .invert-btn') a").on("click",function(r){return r.preventDefault(),t(".content-wrapper").load(t(this).attr("href")+" #content",function(){return t(".content-wrapper").show(),t(".tracks-wrapper").hide()})}),t("section.header header, nav.nav li.home-btn a").on("click",function(r){return r.preventDefault(),t(".content-wrapper").hide(),t(".tracks-wrapper").show()}),k=function(){return u?void 0:(t(".curtrack-description").show(),t(".trackinfo").hide(),t(".controller-wrapper").outerHeight()+40>t(".curtrack-description").outerHeight()&&t(".curtrack-description").outerHeight(t(".controller-wrapper").outerHeight()+40),t(".footer").velocity({height:Math.max(t(".curtrack-description").outerHeight(),t(".controller").height()+40)},{duration:500,queue:!1,begin:function(){return s=!0},complete:function(){return s=!1}}),t(".info-area").removeClass("grey"))},t(document).on("click","li.invert-btn a",function(r){return t("body").toggleClass("invert")}),t(document).on("click","div.mobile-menu",function(r){return t("nav ul").toggleClass("active")}),t(window).resize(function(){var r,e;return r=t(window).height(),e=t("section.footer").offset().top,550>r?t("section.footer").addClass("mini"):t("section.footer").removeClass("mini")}),this})}).call(this);